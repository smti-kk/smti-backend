<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">
    <changeSet author="shikhovse" id="13">
        <sql endDelimiter=";">
            CREATE TABLE public.changes (
                                            id int4 PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY,
                                            "ap_type" varchar(31) NULL,
                                            "name" varchar(500) NULL unique
            );

            ALTER TABLE public.type_internet_access
                ADD COLUMN ap_type VARCHAR(31);

            insert into public.changes values (1, 'GENERAL', 'перенос'),
                                              (2, 'SMO', 'исключения'),
                                              (3, 'GENERAL', 'перенос 4этап'),
                                              (4, 'GENERAL', 'Подключение'),
                                              (5, 'GENERAL', 'Подключение 4этап'),
                                              (6, 'SMO', 'Сгорел'),
                                              (8, 'ESPD', 'перенос 1этап'),
                                              (9, 'ESPD', 'перенос 2этап'),
                                              (10, 'ESPD', 'перенос 3этап'),
                                              (13, 'ESPD', 'Подключение 1этап'),
                                              (14, 'ESPD', 'Подключение 2этап'),
                                              (15, 'ESPD', 'Подключение 3этап'),
                                              (17, 'ESPD', 'Увеличение'),
                                              (18, 'ESPD', 'Увеличение 1этап'),
                                              (19, 'ESPD', 'Увеличение 2этап'),
                                              (20, 'ESPD', 'Увеличение 3этап'),
                                              (21, 'ESPD', 'Увеличение 4этап'),
                                              (22, 'ESPD', 'Белый IP');


            alter table public.access_point drop column change;
            alter table public.access_point add column change integer;

            alter table public.access_point
                add foreign key (change) references public.changes;
        </sql>
    </changeSet>
</databaseChangeLog>