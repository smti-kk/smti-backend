<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:pro="http://www.liquibase.org/xml/ns/pro" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-3.8.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">
    <changeSet author="vitaliy (generated)" id="1601008276957-33">
        <createSequence incrementBy="1" sequenceName="external_systems.jmpa_id_seq" startValue="1"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-34">
        <createSequence incrementBy="1" sequenceName="external_systems.mpa_id_seq" startValue="1"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-35">
        <createSequence incrementBy="1" sequenceName="infomat_id_seq" startValue="1"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-36">
        <createTable tableName="appeal">
            <column name="id" type="INTEGER">
                <constraints nullable="false" primaryKey="true" primaryKeyName="appealPK"/>
            </column>
            <column name="creation_date" type="date"/>
            <column name="creator" type="VARCHAR(255)"/>
            <column name="date" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="file" type="VARCHAR(255)"/>
            <column name="level" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="priority" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="response_file" type="VARCHAR(255)"/>
            <column name="status" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="title" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="location_id" type="INTEGER"/>
        </createTable>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-37">
        <createTable tableName="infomat">
            <column name="id" type="INTEGER">
                <constraints nullable="false" primaryKey="true" primaryKeyName="infomatPK"/>
            </column>
            <column name="address" type="TEXT"/>
            <column name="contacts" type="TEXT"/>
            <column name="install_date" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="organization" type="VARCHAR(256)"/>
            <column name="removed" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="serial_number" type="VARCHAR(16)"/>
            <column name="speed" type="FLOAT8">
                <constraints nullable="false"/>
            </column>
            <column name="key_location" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="key_trunk_channel_type" type="INTEGER"/>
        </createTable>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-38">
        <createTable tableName="journalmap">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="journalmapPK"/>
            </column>
            <column name="created_by" type="VARCHAR(255)"/>
            <column name="created" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="modified_by" type="VARCHAR(255)"/>
            <column name="modified" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="active" type="BOOLEAN"/>
            <column name="key_ap" type="INTEGER"/>
            <column name="key_map" type="INTEGER"/>
        </createTable>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-39">
        <createTable tableName="location_features_editing_request_feature_edit">
            <column name="location_features_editing_request_id" type="INTEGER">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="feature_edits_id" type="INTEGER">
                <constraints nullable="false" primaryKey="true"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-40">
        <createTable tableName="monitoring_access_point">
            <column name="id" type="INTEGER">
                <constraints nullable="false" primaryKey="true" primaryKeyName="monitoring_access_pointPK"/>
            </column>
            <column name="device_id" type="VARCHAR(255)"/>
            <column name="device_ip" type="VARCHAR(255)"/>
            <column name="device_name" type="VARCHAR(255)"/>
            <column name="device_trigger_response_lost" type="BIGINT"/>
            <column name="device_trigger_response_low" type="BIGINT"/>
            <column name="device_trigger_unavailable" type="BIGINT"/>
            <column name="id_account" type="INTEGER"/>
            <column name="id_service" type="INTEGER"/>
            <column name="id_traffic" type="INTEGER"/>
            <column name="id_user" type="INTEGER"/>
            <column name="sensor_id" type="VARCHAR(255)"/>
            <column name="sensor_ip" type="VARCHAR(255)"/>
            <column name="sensor_name" type="VARCHAR(255)"/>
            <column name="sensor_trigger_energy" type="BIGINT"/>
            <column name="service_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-41">
        <createTable tableName="v_technical_capability_active">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="v_technical_capability_activePK"/>
            </column>
            <column name="gov_year_complete" type="INTEGER"/>
            <column name="key_location" type="INTEGER"/>
            <column name="key_operator" type="INTEGER"/>
            <column name="quantity" type="INTEGER"/>
            <column name="quality" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="state" type="VARCHAR(255)"/>
            <column name="type" type="VARCHAR(255)"/>
            <column name="split" type="VARCHAR(255)"/>
            <column name="type_post" type="VARCHAR(255)"/>
            <column name="key_government_program" type="INTEGER"/>
            <column name="key_type_trunkchannel" type="INTEGER"/>
            <column name="key_type_mobile" type="INTEGER"/>
        </createTable>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-42">
        <addPrimaryKey columnNames="key_user, key_location" tableName="user_locations"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-43">
        <addUniqueConstraint columnNames="id" constraintName="UC_INFOMATID_COL" tableName="infomat"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-44">
        <addUniqueConstraint columnNames="id" constraintName="UC_JOURNALMAPID_COL" tableName="journalmap"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-45">
        <addUniqueConstraint columnNames="id" constraintName="UC_MONITORING_ACCESS_POINTID_COL" tableName="monitoring_access_point"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-46">
        <addUniqueConstraint columnNames="feature_edits_id" constraintName="UK_1ehro4b88df22h34qde0kbx9b" tableName="location_features_editing_request_feature_edit"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-47">
        <addUniqueConstraint columnNames="key_organization" constraintName="UK_9rfhne4poleiwahkqa0phn2i4" tableName="user_organizations"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-48">
        <addUniqueConstraint columnNames="key_location" constraintName="UK_hgs5yo966i5p7vll1bayytxdm" tableName="user_locations"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-49">
        <addUniqueConstraint columnNames="feature_edits_id" constraintName="UK_jkju81vtq31dnng8hjygnmgvm" tableName="location_features_editing_request_feature_edits"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-50">
        <addForeignKeyConstraint baseColumnNames="key_map" baseTableName="journalmap" constraintName="FK286srpc9fxnufleiy1o5ggj7r" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="monitoring_access_point" validate="true"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-51">
        <addForeignKeyConstraint baseColumnNames="key_ap" baseTableName="journalmap" constraintName="FK2ugbj2u9bx6y2ixrxrsnxgh4n" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="access_point" validate="true"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-52">
        <addForeignKeyConstraint baseColumnNames="new_value_id" baseTableName="feature_edit" constraintName="FK3ij3rlyh8xaexoj7uqacpnt81" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="technical_capability" validate="true"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-53">
        <addForeignKeyConstraint baseColumnNames="key_user" baseTableName="user_organizations" constraintName="FK95htvo4cpe2cask2h4t6qd8nf" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="app_user" validate="true"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-54">
        <addForeignKeyConstraint baseColumnNames="key_organization" baseTableName="user_organizations" constraintName="FK9dqshtk6a2n9sf8jhs2qabglx" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="organization" validate="true"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-55">
        <addForeignKeyConstraint baseColumnNames="key_trunk_channel_type" baseTableName="infomat" constraintName="FKacr44ejn31r2baqhitvx1snxh" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="type_trunk_channel" validate="true"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-56">
        <addForeignKeyConstraint baseColumnNames="location_features_editing_request_id" baseTableName="location_features_editing_request_feature_edit" constraintName="FKb9od1nmsbecmuq3jiud9vfqbg" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="location_features_editing_request" validate="true"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-57">
        <addForeignKeyConstraint baseColumnNames="location_features_editing_request_id" baseTableName="location_features_editing_request_feature_edits" constraintName="FKca6y68f2bvjvcr2yhip1y8l3a" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="location_features_editing_request" validate="true"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-58">
        <addForeignKeyConstraint baseColumnNames="location_id" baseTableName="location_features_editing_request" constraintName="FKfgkheoyrsbvk5elyjaovnx746" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="location" validate="true"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-59">
        <addForeignKeyConstraint baseColumnNames="key_type_mobile" baseTableName="v_technical_capability_active" constraintName="FKh3ly81xqhtk6m55udjnw7s08a" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="type_mobile" validate="true"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-60">
        <addForeignKeyConstraint baseColumnNames="key_location" baseTableName="v_technical_capability_active" constraintName="FKk1ylyf5qp4ypab1naaqbyuq93" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="location" validate="true"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-61">
        <addForeignKeyConstraint baseColumnNames="key_government_program" baseTableName="v_technical_capability_active" constraintName="FKkcmmptj6r3txac9a0hg0bxtoy" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="government_development_program" validate="true"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-62">
        <addForeignKeyConstraint baseColumnNames="location_id" baseTableName="appeal" constraintName="FKrv8fymn2tiqexl1ei92yg8tdp" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="location" validate="true"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-63">
        <addForeignKeyConstraint baseColumnNames="key_type_trunkchannel" baseTableName="v_technical_capability_active" constraintName="FKtn4pp7wv3q8wrtmfnnd6brs9y" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="type_trunk_channel" validate="true"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-64">
        <addForeignKeyConstraint baseColumnNames="key_location" baseTableName="infomat" constraintName="FKxfac0lps6wkepntsplhxrry9" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="location" validate="true"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-65">
        <dropForeignKeyConstraint baseTableName="request_for_change" constraintName="FK5dr5y9lsuvc33yy698rxqqhi7"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-66">
        <dropForeignKeyConstraint baseTableName="technical_capability" constraintName="FKf2annfs9rulv486ejj8o5ntn3"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-67">
        <dropForeignKeyConstraint baseTableName="request_for_change" constraintName="reques_for_change_locationdelete"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-68">
        <dropUniqueConstraint constraintName="uc_locationid_col" tableName="location"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-69">
        <dropUniqueConstraint constraintName="uc_request_for_changeid_col" tableName="request_for_change"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-70">
        <dropUniqueConstraint constraintName="uc_trunk_channelid_col" tableName="trunk_channel"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-71">
        <dropUniqueConstraint constraintName="uc_userusername_col" tableName="app_user"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-72">
        <dropView viewName="geography_columns"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-73">
        <dropView viewName="geometry_columns"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-74">
        <dropView viewName="raster_columns"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-75">
        <dropView viewName="raster_overviews"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-76">
        <dropView viewName="v_technical_capability_active"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-77">
        <dropTable tableName="bck_access_point"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-78">
        <dropTable tableName="request_for_change"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-79">
        <dropTable tableName="spatial_ref_sys"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-80">
        <dropColumn columnName="border" tableName="geo_data"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-81">
        <dropColumn columnName="fias" tableName="geo_data"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-82">
        <dropColumn columnName="key_request_for_change" tableName="technical_capability"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-83">
        <dropColumn columnName="okato" tableName="geo_data"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-84">
        <dropColumn columnName="oktmo" tableName="geo_data"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-85">
        <dropColumn columnName="osm_id" tableName="geo_data"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-86">
        <dropColumn columnName="status" tableName="trunk_channel"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-87">
        <dropSequence sequenceName="request_for_change_id_seq"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-1">
        <dropForeignKeyConstraint baseTableName="location_features_editing_request_feature_edit" constraintName="FKj14omt6jhcx4192km4nrgakjc"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-2">
        <addForeignKeyConstraint baseColumnNames="feature_edits_id" baseTableName="location_features_editing_request_feature_edit" constraintName="FKj14omt6jhcx4192km4nrgakjc" referencedColumnNames="id" referencedTableName="feature_edit"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-3">
        <alterSequence sequenceName="accesspoint_id_seq"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-4">
        <alterSequence sequenceName="app_user_id_seq"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-5">
        <alterSequence sequenceName="features_edit_id_seq"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-6">
        <alterSequence sequenceName="geodata_id_seq"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-7">
        <alterSequence sequenceName="governmentdevelopmentprogram_id_seq"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-8">
        <alterSequence sequenceName="hardware_id_seq"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-9">
        <alterSequence sequenceName="location_features_editing_id_seq"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-10">
        <alterSequence sequenceName="location_id_seq"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-11">
        <alterSequence sequenceName="operator_id_seq"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-12">
        <alterSequence sequenceName="organization_id_seq"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-13">
        <alterSequence sequenceName="software_id_seq"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-14">
        <alterSequence sequenceName="technical_capability_id_seq"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-15">
        <alterSequence sequenceName="trunkchannel_id_seq"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-16">
        <alterSequence sequenceName="typeinternetaccess_id_seq"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-17">
        <alterSequence sequenceName="typemobile_id_seq"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-18">
        <alterSequence sequenceName="typeorganization_id_seq"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-19">
        <alterSequence sequenceName="typesmo_id_seq"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-20">
        <alterSequence sequenceName="typetrunkchannel_id_seq"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-21">
        <dropNotNullConstraint columnDataType="varchar(255)" columnName="email" tableName="app_user"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-22">
        <dropNotNullConstraint columnDataType="varchar(255)" columnName="first_name" tableName="app_user"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-23">
        <dropNotNullConstraint columnDataType="boolean" columnName="is_active" tableName="app_user"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-24">
        <dropNotNullConstraint columnDataType="int" columnName="key_location" tableName="organization"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-25">
        <dropNotNullConstraint columnDataType="int" columnName="key_location" tableName="technical_capability"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-26">
        <dropNotNullConstraint columnDataType="int" columnName="key_location_start" tableName="trunk_channel"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-27">
        <dropNotNullConstraint columnDataType="int" columnName="key_operator" tableName="technical_capability"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-28">
        <dropNotNullConstraint columnDataType="varchar(255)" columnName="last_name" tableName="app_user"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-29">
        <dropNotNullConstraint columnDataType="varchar(255)" columnName="name" tableName="location"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-30">
        <dropNotNullConstraint columnDataType="varchar(255)" columnName="patronymic_name" tableName="app_user"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-31">
        <dropNotNullConstraint columnDataType="varchar(255)" columnName="type" tableName="location"/>
    </changeSet>
    <changeSet author="vitaliy (generated)" id="1601008276957-32">
        <dropNotNullConstraint columnDataType="varchar(255)" columnName="username" tableName="app_user"/>
    </changeSet>
</databaseChangeLog>
